# Data Model: Desktop Application Packaging

**Feature**: [spec.md](spec.md) | **Plan**: [plan.md](plan.md)
**Date**: 2025-10-22

## Overview

This feature does NOT introduce new data models or entities. It packages the existing Vue 3/Quasar web application as desktop installers without modifying the application's data layer. The desktop wrapper manages build configuration and package metadata, but these are static files, not runtime data entities.

## Entities

**No new runtime entities** - This feature creates desktop packages but does not add new data models to the application.

## Existing Entities (Unchanged)

All application data entities remain completely unchanged:

- **User**: No changes to user data structure, authentication, or storage
- **Client**: No changes to client entity (stored in backend)
- **Case**: No changes to case entity (stored in backend)
- **File**: No changes to file metadata or storage
- **Session**: No changes to authentication session handling

The desktop application connects to the same backend APIs and uses the same data models as the web version.

## Build-Time Configuration (Static, Not Runtime Entities)

While not traditional "data models," the following configuration structures exist at build time:

### Desktop Package Metadata

Static configuration defining package properties:

**Attributes**:
- `name`: Application name (e.g., "FMA Skeckit App")
- `version`: Semver version string (e.g., "1.0.0")
- `description`: Brief application description
- `author`: Developer/organization name
- `productName`: User-facing product name
- `appId`: Unique application identifier (e.g., "com.fma.skeckit")

**Storage**: `desktop/package.json` and `desktop/electron-builder.yml`

**Relationships**: None - static metadata consumed during build

---

### Build Configuration

Static settings that control packaging behavior:

**Attributes**:
- `platforms`: Target platforms (win, mac, linux)
- `iconPath`: Path to application icon source
- `outputDir`: Build output directory path
- `compression`: Compression algorithm (7z, tar, etc.)
- `fileAssociations`: File types the app can open (optional)
- `protocols`: Custom URL protocols (e.g., fmaskeckit://)

**Storage**: `desktop/electron-builder.yml` (YAML configuration)

**Relationships**: None - consumed by electron-builder during packaging

---

### Update Manifest (Runtime, But External)

JSON structure hosted on update server for auto-update feature (P3):

**Attributes**:
- `version`: Latest available version string
- `releaseDate`: ISO 8601 timestamp
- `downloadUrl`: URL to download installer
- `releaseNotes`: Markdown-formatted release notes
- `sha512`: File integrity checksum

**Storage**: External (GitHub Releases API response or custom JSON file)

**Relationships**: None - consumed by electron-updater to check for updates

**Note**: This is not stored in the application; it's hosted externally and fetched at runtime

---

## Data Flow

**No application data flow changes** - The desktop wrapper is a container for the existing web application. All data flows remain identical to the web version:

1. **Authentication**: Desktop app → Backend API (same as web)
2. **Case Search**: Desktop app → Backend API (same as web)
3. **File Operations**: Desktop app → Backend API → Google Drive (same as web)
4. **Local Storage**: Desktop uses browser APIs (LocalStorage/IndexedDB) same as web

The only new data flow is for auto-update (P3):

**Auto-Update Flow** (Optional P3 Feature):
1. Desktop app queries update server (GitHub Releases or custom server)
2. Update server returns Update Manifest (version, download URL)
3. If new version available, desktop app downloads installer
4. User approves, installer runs, application updates

---

## Storage

**No new application data storage** - Desktop application stores no new runtime data beyond what the web version already stores.

**Build Artifacts** (Generated, Gitignored):
- `dist-desktop/`: Build outputs (installers, unpacked applications)
- Located at repository root
- Generated by electron-builder during packaging
- Ignored in `.gitignore` (not stored in repository)

**Local Application Data** (Runtime):
- Desktop uses same LocalStorage/IndexedDB as web version
- Platform-appropriate directories:
  - Windows: `%APPDATA%\fma-skeckit-app\`
  - macOS: `~/Library/Application Support/fma-skeckit-app/`
  - Linux: `~/.config/fma-skeckit-app/`
- Contains same data as web version (user preferences, cached data)

**Desktop-Specific Settings** (Optional):
- Window size/position (if implemented): Stored in electron-store or LocalStorage
- Not a new entity - just window dimensions (width, height, x, y)

---

## Migration

**No data migration required** - This feature does not change the data model, introduce new entities, or modify data storage patterns. Desktop and web versions share identical data structures and backend APIs.

**User Transition**:
- Users switching from web to desktop see the same data (shared backend)
- No import/export required
- No data conversion or transformation needed

---

## Summary

This feature has no data model implications. It creates desktop installers for an existing web application without introducing new runtime entities, modifying data structures, or changing data storage patterns. The desktop wrapper is a presentation layer container that communicates with the same backend APIs using the same data models as the web version.

The only "data" in this feature is static build configuration (package.json, electron-builder.yml) that controls packaging behavior and external update manifests (P3 auto-update feature) hosted on a separate server.
